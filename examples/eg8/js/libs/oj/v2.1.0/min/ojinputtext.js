/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojeditablevalue"],function(a,g){a.Na("oj.inputBase",g.oj.editableValue,{version:"1.0.0",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"",_WIDGET_CLASS_NAMES:"",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_GET_INIT_OPTIONS_PROPS:[{ha:"disabled",Pd:!0},{ha:"pattern"},{ha:"placeholder"},{ha:"value"},{ha:"readonly",option:"readOnly",Pd:!0},{ha:"required",qh:!0,Pd:!0},{ha:"title"}],_INPUT_HELPER_KEY:"",M0:"blur",H1:"keydown",x1:"input",g1:"drop",options:{converter:void 0,
placeholder:void 0,rawValue:void 0,readOnly:!1},LB:function(a){var b=this._superApply(arguments);this.Lza();return b},Wf:function(c,b){this._super(c,b);a.Me.mp(this._GET_INIT_OPTIONS_PROPS,b,this)},_ComponentCreate:function(){var a=this._superApply(arguments),b=this.options.readOnly;this.lh="rtl"===this.jd();"boolean"===typeof b&&this.element.prop("readonly",b);this.zB()?(this.cEa(),this.h1()&&this.oQ(),this._focusable({element:this.Tj,applyHighlight:!0})):this._focusable({element:this.element,applyHighlight:!0});
this.LR={};this.Ue=null;return a},Lh:function(){var a=this._superApply(arguments),b=this;this._CLASS_NAMES&&this.element.addClass(this._CLASS_NAMES);this.E3();this.ZO();g.each(["disabled","readOnly"],function(a,c){b.options[c]&&b.daa(c,b.options[c])});return a},daa:function(a,b){"disabled"===a&&this.element.prop("disabled",b);"readOnly"===a&&(this.element.prop("readonly",b),this.tK("readOnly",b));"disabled"!==a&&"readOnly"!==a||this.E3()},_setOption:function(c,b){var d=this._superApply(arguments);
"disabled"!==c&&"readOnly"!==c||this.daa(c,b);"pattern"===c&&(this.LR[a.Pe.VALIDATOR_TYPE_REGEXP]=this.e7(),this.wx());return d},_destroy:function(){var c=this._superApply(arguments);this.element.off("blur drop keydown input");this.sU&&this.sU.remove();this.zB()&&(this.h1()?a.A.unwrap(this.element,this.Tj):a.A.unwrap(this.element));return c},E3:function(){if(!this.options.readOnly&&!this.options.disabled){this.Ue={};var a=g.proxy(this.cV,this),b=g.proxy(this.hK,this),d=g.proxy(this.fza,this),e=function(){this.focus()};
this.element.on("blur",a);this.element.on("keydown",b);this.element.on("input",d);this.element.on("drop",e);this.Ue[this.M0]=a;this.Ue[this.H1]=b;this.Ue[this.x1]=d;this.Ue[this.g1]=e}else if(this.Ue)for(a=[this.M0,this.H1,this.x1,this.g1],b=0,d=a.length;b<d;b++)this.Ue[a[b]]&&(this.element.off(a[b],this.Ue[a[b]]),delete this.Ue[a[b]])},Qr:{readOnly:"oj-read-only"},Lza:function(){for(var a=this._ATTR_CHECK,b=0,d=a.length;b<d;b++){var e=a[b].attr;"setMandatory"in a[b]&&this.element.attr(e,a[b].setMandatory)}},
cV:function(a){this.Dc(this.Li(),a)},hK:function(a){a.keyCode===g.ui.keyCode.ENTER&&this.Dc(this.Li(),a)},fza:function(a){this.Tp(this.Vf().val(),a)},zB:function(){return this._WIDGET_CLASS_NAMES},h1:function(){return this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES},cEa:function(){this.oe?(this.Tj=g(this.oe).addClass(this._WIDGET_CLASS_NAMES),this.Tj.append(this.element)):(g(this.element).wrap(g("\x3cdiv\x3e").addClass(this._WIDGET_CLASS_NAMES)),this.Tj=this.element.parent())},oQ:function(){return g(this.element).wrap(g("\x3cdiv\x3e").addClass(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES)).parent()},
ZO:function(){if(this._INPUT_HELPER_KEY&&this.zB()){var a=this.element.attr("aria-describedby")||"",b=this.$n(this._INPUT_HELPER_KEY);this.element.attr("aria-describedby",a+(" "+b));this.sU=g("\x3cdiv class\x3d'oj-helper-hidden-accessible' id\x3d'"+b+"'\x3e"+this.Jm(this.F(this._INPUT_HELPER_KEY))+"\x3c/div\x3e");this.L0().append(this.sU)}},Jm:function(a){return g("\x3cspan\x3e"+a+"\x3c/span\x3e").text()},L0:function(){return this.widget()},BB:function(){var c=this._superApply(arguments);this.options.pattern&&
(this.LR[a.Pe.VALIDATOR_TYPE_REGEXP]=this.e7());return g.extend(this.LR,c)},tK:function(a,b){-1!=Object.keys(this.Qr).indexOf(a)&&this.widget().toggleClass(this.Qr[a],!!b)},e7:function(){if(!this.options.pattern)return null;var c={pattern:this.options.pattern,label:this.RS()};g.extend(c,this.options.translations.regexp||{});return a.Da.$w(a.Pe.VALIDATOR_TYPE_REGEXP).createValidator(c)},$n:function(a){return this.uuid+"_"+a},vKa:function(){return this.lh},refresh:function(){var a=this._superApply(arguments);
this.lh="rtl"===this.jd();return a},getNodeBySubId:function(a){return this._super(a)},widget:function(){return this.zB()?this.Tj:this.element}},!0);a.Na("oj.ojInputPassword",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"password"}],_CLASS_NAMES:"oj-inputpassword-input",_WIDGET_CLASS_NAMES:"oj-inputpassword oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var b=this._superApply(arguments),d;
b||(d=a.subId,"oj-inputpassword-input"===d&&(b=this.element?this.element[0]:null));return b||null},_GetDefaultStyleClass:function(){return"oj-inputpassword"}});a.Na("oj.ojInputText",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_CLASS_NAMES:"oj-inputtext-input",_WIDGET_CLASS_NAMES:"oj-inputtext oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var b=this._superApply(arguments),d;b||
(d=a.subId,"oj-inputtext-input"===d&&(b=this.element?this.element[0]:null));return b||null},_GetDefaultStyleClass:function(){return"oj-inputtext"},PG:function(){return"oj-inputBase"}});a.Na("oj.ojTextArea",g.oj.inputBase,{version:"1.0.0",defaultElement:"\x3ctextarea\x3e",widgetEventPrefix:"oj",_ATTR_CHECK:[],_CLASS_NAMES:"oj-textarea-input",_WIDGET_CLASS_NAMES:"oj-textarea oj-form-control oj-component",options:{pattern:""},getNodeBySubId:function(a){var b=this._superApply(arguments),d;b||(d=a.subId,
"oj-textarea-input"===d&&(b=this.element?this.element[0]:null));return b||null},_GetDefaultStyleClass:function(){return"oj-textarea"},PG:function(){return"oj-inputBase"}});a.Components.Ua("inputBase","editableValue",{properties:{converter:{type:"Object"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},readOnly:{type:"boolean"}},methods:{refresh:{},widget:{}},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"inputBase"}});a.Components.Ua("ojInputPassword","inputBase",
{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"ojInputPassword"}});a.Components.register("oj-input-password",a.Components.getMetadata("ojInputPassword"));a.Components.Ua("ojInputText","inputBase",{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"input",_widgetName:"ojInputText"}});a.Components.register("oj-input-text",a.Components.getMetadata("ojInputText"));
a.Components.Ua("ojTextArea","inputBase",{properties:{pattern:{type:"string"},value:{type:"string",writeback:!0}},methods:{},extension:{_hasWrapper:!0,_innerElement:"textarea",_widgetName:"ojTextArea"}});a.Components.register("oj-text-area",a.Components.getMetadata("ojTextArea"))});